name: check for directories containing changes
description: indicate whether or not a given path has changes
inputs:
  path_prefix:
    description: path prefix to directories, including the final preceding slash (eg. /src/project/)
    default: ""
  include:
    description: glob pattern used to include files, space delimited for multiple patterns
    default: ""
  exclude:
    description: glob pattern used to exclude files, space delimited for multiple patterns
    default: ""
  include_hidden:
    description: include hidden directories
    default: false
outputs:
  directories:
    description: json list of all directories containing changes
    value: ${{ steps.get_changed_directories.outputs.directories }}
runs:
  using: composite
  steps:
  - id: get_changed_directories
    name: get changed directories
    shell: bash
    run: |
      printf directories=$(git diff --name-only origin/master ${{ github.sha }} | $GITHUB_ACTION_PATH/scripts/get_changed_directories.sh "${{ inputs.base_path }}" "${{ inputs.include }}" "${{ inputs.exclude }}" "${{ inputs.include_hidden }}") >> $GITHUB_OUTPUT

